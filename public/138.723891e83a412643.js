"use strict";(self.webpackChunkcliente_srff=self.webpackChunkcliente_srff||[]).push([[138],{4138:(M,b,r)=>{r.r(b),r.d(b,{DepositosAdminModule:()=>D});var p=r(9808),l=r(9648),d=r(4182),t=r(5e3),g=r(5554),v=r(4586),f=r(2290),T=r(4153),h=r(8338),_=r(2704);function A(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"div",11),t.TgZ(3,"h4",12),t._uU(4,"N\xf9mero de comprobante"),t.qZA(),t.TgZ(5,"p",13),t._uU(6),t.TgZ(7,"button",14),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw().setSrc(n.image_path)}),t._UZ(8,"i",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t._uU(11),t.qZA(),t.TgZ(12,"div",17),t._uU(13),t.qZA(),t.TgZ(14,"div",17),t._uU(15),t.qZA(),t.TgZ(16,"div",17),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"div",18),t.TgZ(19,"div",17),t.TgZ(20,"button",19),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw().seleccionar(n,!0)}),t._uU(21," Aceptar "),t.qZA(),t.TgZ(22,"button",20),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw().seleccionar(n,!1)}),t._uU(23," Rechazar "),t.qZA(),t.TgZ(24,"button",21),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw().cancelar(n)}),t._uU(25," Cancelar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=s.$implicit;t.xp6(6),t.hij(" ",o.comprobante," "),t.xp6(5),t.hij(" Usuario: ",o.usuario," "),t.xp6(2),t.hij(" Valor: $",o.valor," "),t.xp6(2),t.hij(" Banco: ",o.banco," "),t.xp6(2),t.hij(" Fecha: ",o.date," ")}}function x(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"label",24),t._uU(3,"\xbfValidar deposito?"),t.qZA(),t.qZA(),t.TgZ(4,"div",23),t.TgZ(5,"button",25),t.NdJ("click",function(){return t.CHM(o),t.oxw().realizar()}),t._uU(6,"Aceptar"),t.qZA(),t.TgZ(7,"button",26),t._uU(8,"Cancelar"),t.qZA(),t.qZA(),t.qZA()}}function q(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",27),t.TgZ(2,"label"),t._uU(3,"Escriba la raz\xf3n"),t.qZA(),t.TgZ(4,"textarea",28),t._uU(5,"                    "),t.qZA(),t.qZA(),t.TgZ(6,"div",23),t.TgZ(7,"button",25),t.NdJ("click",function(){return t.CHM(o),t.oxw().realizar()}),t._uU(8,"Rechazar"),t.qZA(),t.TgZ(9,"button",26),t._uU(10,"Cancelar"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(4),t.Q6J("formControl",o.razon)}}let C=(()=>{class e{constructor(o,i,c,n,a,m,k){this.afdb=o,this.afs=i,this.router=c,this.toastr=n,this.spinner=a,this.auth=m,this.depositoService=k,this.auth.usuario.subscribe(u=>this.usuario=u),this.subscription=this.depositoService.depositos.subscribe(u=>{var Z;this.depositos=null==u?void 0:u.filter(F=>F.aprobado_por===this.usuario.id_usuario),0==(null===(Z=this.depositos)||void 0===Z?void 0:Z.length)&&this.router.navigate(["app/depositos-admin"])}),this.razon=new d.NI(null,[d.kI.required])}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}seleccionar(o,i){this.razon.reset(),this.deposito=o,this.realizado=i}realizar(){let o={id_usuario:this.deposito.id_usuario,valor:this.deposito.valor,banco:this.deposito.banco,comprobante:this.deposito.comprobante,realizado:this.realizado,razon:this.razon.value,aprobado_por:this.usuario.id_usuario};this.spinner.show(),this.depositoService.store(o).subscribe(()=>{var i;this.realizado?this.toastr.success("Deposito realizado"):this.toastr.error("Deposito rechazado"),this.afdb.object("depositos/"+this.deposito.key).remove(),this.afs.ref(this.deposito.image_path).delete(),this.razon.reset(),this.deposito=null,null===(i=document.getElementById("closeModal"))||void 0===i||i.click(),this.spinner.hide()},()=>{var i;null===(i=document.getElementById("closeModal"))||void 0===i||i.click(),this.spinner.hide()})}cancelar(o){this.afdb.object("depositos/"+o.key+"/aprobado_por").remove()}setSrc(o){this.afs.ref(o).getDownloadURL().subscribe(i=>window.open(i),()=>this.toastr.error("No se pudo cargar la imagen"))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.KQ),t.Y36(v.Q1),t.Y36(l.F0),t.Y36(f._W),t.Y36(T.t2),t.Y36(h.e),t.Y36(_.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-deposito"]],decls:11,vars:3,consts:[[1,"row"],[1,"col-12"],["type","button","routerLink","/app/depositos-admin",1,"btn","btn-round","btn-defaul"],["class","col-sm-6 col-xl-4 col-xxl-3",4,"ngFor","ngForOf"],["id","realizar","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","form",1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content",2,"background-color","#1a2035"],["class","modal-body",4,"ngIf"],["type","button","id","closeModal","hidden","","data-dismiss","modal"],[1,"col-sm-6","col-xl-4","col-xxl-3"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-category"],["type","button",1,"btn","btn-just-icon","btn-info","btn-sm",3,"click"],[1,"fa","fa-image"],[1,"card-body"],[1,"form-group"],[1,"card-footer"],["data-toggle","modal","data-target","#realizar",1,"btn","btn-success","m-1",3,"click"],["data-toggle","modal","data-target","#realizar",1,"btn","btn-info","m-1",3,"click"],[1,"btn","btn-default","m-1",3,"click"],[1,"modal-body"],[1,"text-center"],[2,"font-size","medium"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[1,"form-group","m-2"],["rows","3",1,"form-control",3,"formControl"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3," Atras "),t.qZA(),t.qZA(),t.YNc(4,A,26,5,"div",3),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.YNc(8,x,9,0,"div",7),t.YNc(9,q,11,1,"div",7),t._UZ(10,"button",8),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngForOf",i.depositos),t.xp6(4),t.Q6J("ngIf",i.realizado),t.xp6(1),t.Q6J("ngIf",!i.realizado))},directives:[l.rH,p.sg,p.O5,d.Fj,d.JJ,d.oH],styles:[""]}),e})();function U(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td",8),t.TgZ(12,"button",11),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw().seleccionar(n)}),t._UZ(13,"i",12),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=s.$implicit,i=t.oxw();t.xp6(2),t.Oqu(o.usuario),t.xp6(2),t.hij("$ ",o.valor,""),t.xp6(2),t.Oqu(o.banco),t.xp6(2),t.Oqu(o.comprobante),t.xp6(1),t.Q6J("width",200),t.xp6(1),t.Oqu(o.date),t.xp6(2),t.Q6J("disabled",i.disable)}}const y=[{path:"",component:(()=>{class e{constructor(o,i,c,n){this.router=o,this.afdb=i,this.auth=c,this.depositoService=n,this.subscription=this.depositoService.depositos.subscribe(a=>{this.depositos=null==a?void 0:a.filter(m=>!m.aprobado_por)}),this.auth.usuario.subscribe(a=>this.usuario=a),this.disable=!1}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}seleccionar(o){this.disable=!0,this.afdb.object("depositos/"+o.key).update({aprobado_por:this.usuario.id_usuario}).then(()=>{this.router.navigate(["app/depositos-admin/deposito"]),this.disable=!1})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0),t.Y36(g.KQ),t.Y36(h.e),t.Y36(_.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista"]],decls:25,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-3"],["type","button","routerLink","deposito",1,"btn","btn-round","btn-success"],[1,"card-body"],[1,"table-responsive"],["id","infoTable",1,"table","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"width"],["type","button","title","Seleccionar",1,"btn","btn-round","btn-just-icon","btn-success","btn-sm","m-1",3,"disabled","click"],[1,"fa","fa-external-link-alt"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t._uU(5," Seleccionados "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"table",7),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th"),t._uU(12,"Usuario"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Valor"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Banco"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Comprobante"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Fecha"),t.qZA(),t.TgZ(21,"th",8),t._uU(22,"Seleccionar"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"tbody"),t.YNc(24,U,14,7,"tr",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(24),t.Q6J("ngForOf",i.depositos))},directives:[l.rH,p.sg],styles:[""]}),e})()},{path:"deposito",component:C}];let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,z,d.u5,d.UX]]}),e})()}}]);