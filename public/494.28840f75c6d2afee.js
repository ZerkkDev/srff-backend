"use strict";(self.webpackChunkcliente_srff=self.webpackChunkcliente_srff||[]).push([[494],{2494:(z,b,c)=>{c.r(b),c.d(b,{RecargasAdminModule:()=>D});var l=c(9808),g=c(9648),t=c(5e3);class v{constructor(r,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),n=i.style;n.position="fixed",n.top=n.opacity="0",n.left="-999em",i.setAttribute("aria-hidden","true"),i.value=r,this._document.body.appendChild(i)}copy(){const r=this._textarea;let e=!1;try{if(r){const i=this._document.activeElement;r.select(),r.setSelectionRange(0,r.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch(i){}return e}destroy(){const r=this._textarea;r&&(r.remove(),this._textarea=void 0)}}let f=(()=>{class o{constructor(e){this._document=e}copy(e){const i=this.beginCopy(e),n=i.copy();return i.destroy(),n}beginCopy(e){return new v(e,this._document)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(l.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=c(5554),Z=c(2290),C=c(8338),x=c(7870);function y(o,r){1&o&&(t.TgZ(0,"th"),t._uU(1,"Aprobando"),t.qZA())}function A(o,r){1&o&&t._UZ(0,"img",14)}function q(o,r){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.aprobado)}}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",10),t.TgZ(1,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().seleccionar(n)}),t._UZ(2,"i",16),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.disable)}}function U(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().seleccionar(n)}),t._UZ(1,"i",16),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("disabled",e.disable)}}function I(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().seleccionar(n)}),t._UZ(1,"i",16),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("disabled",e.disable)}}function j(o,r){if(1&o&&(t.TgZ(0,"td",10),t.YNc(1,U,2,1,"button",17),t.YNc(2,I,2,1,"button",18),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.aprobado_por),t.xp6(1),t.Q6J("ngIf",e.aprobado_por)}}function M(o,r){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.YNc(9,A,1,0,"img",12),t.qZA(),t.YNc(10,q,2,1,"td",9),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.YNc(14,k,3,1,"td",13),t.YNc(15,j,3,2,"td",13),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.usuario),t.xp6(2),t.Oqu(e.id_jugador),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.hij(" ",e.diamantes," "),t.xp6(1),t.Q6J("ngIf",e.tarjeta),t.xp6(1),t.Q6J("ngIf",1==(null==i.usuario?null:i.usuario.id_tipo)),t.xp6(2),t.Oqu(t.xi3(13,9,e.created_at,"d/M/y, h:mm a")),t.xp6(2),t.Q6J("ngIf",4==(null==i.usuario?null:i.usuario.id_tipo)),t.xp6(1),t.Q6J("ngIf",1==(null==i.usuario?null:i.usuario.id_tipo))}}let R=(()=>{class o{constructor(e,i,n,a,u,m){this.clipboard=e,this.router=i,this.afdb=n,this.toastr=a,this.auth=u,this.recargasService=m,this.auth.usuario.subscribe(p=>this.usuario=p),this.subscription=this.recargasService.recargas.subscribe(p=>{var d;this.recargas=1==(null===(d=this.usuario)||void 0===d?void 0:d.id_tipo)?p:null==p?void 0:p.filter(_=>!_.aprobado_por)}),this.disable=!1}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}seleccionar(e){this.disable=!0,this.afdb.object("recargas/"+e.key).update({aprobado_por:this.usuario.id_usuario,aprobado:this.usuario.nombre}).then(()=>{this.router.navigate(["app/recargas-admin/recarga"]).then(()=>{this.clipboard.copy(e.id_jugador),this.toastr.info("ID copiado: "+e.id_jugador)}),this.disable=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f),t.Y36(g.F0),t.Y36(h.KQ),t.Y36(Z._W),t.Y36(C.e),t.Y36(x.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lista"]],decls:26,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-3"],["type","button","routerLink","recarga",1,"btn","btn-round","btn-success"],[1,"card-body"],[1,"table-responsive"],["id","infoTable",1,"table","table-hover"],[1,"d-none","d-sm-table-cell"],[4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"],["src","../../../assets/img/tarjeta.png","height","50px",4,"ngIf"],["class","text-center",4,"ngIf"],["src","../../../assets/img/tarjeta.png","height","50px"],["type","button","title","Seleccionar",1,"btn","btn-round","btn-just-icon","btn-success","btn-sm","m-1",3,"disabled","click"],[1,"fa","fa-external-link-alt"],["type","button","class","btn btn-round btn-just-icon btn-success btn-sm m-1","title","Seleccionar",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-round btn-just-icon btn-danger btn-sm m-1","title","Seleccionar",3,"disabled","click",4,"ngIf"],["type","button","title","Seleccionar",1,"btn","btn-round","btn-just-icon","btn-danger","btn-sm","m-1",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t._uU(5," Seleccionados "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"table",7),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th",8),t._uU(12,"Usuario"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Id jugador"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Precio"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Diamantes"),t.qZA(),t.YNc(19,y,2,0,"th",9),t.TgZ(20,"th"),t._uU(21,"Fecha"),t.qZA(),t.TgZ(22,"th",10),t._uU(23,"Seleccionar"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"tbody"),t.YNc(25,M,16,12,"tr",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(19),t.Q6J("ngIf",1==(null==i.usuario?null:i.usuario.id_tipo)),t.xp6(6),t.Q6J("ngForOf",i.recargas))},directives:[g.rH,l.O5,l.sg],pipes:[l.uU],styles:[""]}),o})();var s=c(4182),T=c(4153);function J(o,r){1&o&&t._UZ(0,"img",23)}function O(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"div",11),t.TgZ(3,"h4",12),t._uU(4,"ID de jugador"),t.qZA(),t.TgZ(5,"p",13),t._uU(6),t.TgZ(7,"button",14),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().copy(a.id_jugador)}),t._UZ(8,"i",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",16),t.TgZ(10,"div",17),t._uU(11),t.qZA(),t.TgZ(12,"div",17),t._uU(13),t.qZA(),t.TgZ(14,"div",17),t._uU(15),t.YNc(16,J,1,0,"img",18),t.qZA(),t.TgZ(17,"div",17),t._uU(18),t.ALo(19,"date"),t.qZA(),t.qZA(),t.TgZ(20,"div",19),t.TgZ(21,"div",17),t.TgZ(22,"button",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().seleccionar(a,!0)}),t._uU(23," Aceptar "),t.qZA(),t.TgZ(24,"button",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().seleccionar(a,!1)}),t._uU(25," Rechazar "),t.qZA(),t.TgZ(26,"button",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().cancelar(a)}),t._uU(27," Cancelar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(6),t.hij(" ",e.id_jugador," "),t.xp6(5),t.hij(" Usuario: ",e.usuario," "),t.xp6(2),t.hij(" Precio: $",e.precio," "),t.xp6(2),t.hij(" Diamantes: ",e.diamantes," "),t.xp6(1),t.Q6J("ngIf",1==e.tarjeta),t.xp6(2),t.hij(" Fecha: ",t.xi3(19,6,e.created_at,"d/M/y, h:mm a")," ")}}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",25),t._UZ(2,"input",26),t.qZA(),t.TgZ(3,"div",27),t.TgZ(4,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().realizar()}),t._uU(5,"Aceptar"),t.qZA(),t.TgZ(6,"button",29),t._uU(7,"Cancelar"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("formControl",e.descripcion)}}function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",17),t.TgZ(2,"label"),t._uU(3,"Razon"),t.qZA(),t.TgZ(4,"select",30),t.TgZ(5,"option",31),t._uU(6,"ID de jugador incorrecto"),t.qZA(),t.TgZ(7,"option",32),t._uU(8,"ID de otra region"),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"div",27),t.TgZ(11,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().realizar()}),t._uU(12,"Rechazar"),t.qZA(),t.TgZ(13,"button",29),t._uU(14,"Cancelar"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("formControl",e.descripcion)}}const N=[{path:"",component:R},{path:"recarga",component:(()=>{class o{constructor(e,i,n,a,u,m,p){this.clipboard=e,this.afdb=i,this.router=n,this.toastr=a,this.spinner=u,this.auth=m,this.recargasService=p,this.auth.usuario.subscribe(d=>this.usuario=d),this.subscription=this.recargasService.recargas.subscribe(d=>{var _;this.recargas=null==d?void 0:d.filter(L=>L.aprobado_por===this.usuario.id_usuario),0==(null===(_=this.recargas)||void 0===_?void 0:_.length)&&this.router.navigate(["app/recargas-admin"])}),this.descripcion=new s.NI(null,[s.kI.required])}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}copy(e){this.clipboard.copy(e),this.toastr.info("ID copiado: "+e)}seleccionar(e,i){this.descripcion.reset(),this.recarga=e,this.recarga.realizado=i}realizar(){this.descripcion.valid?(this.recarga.descripcion=this.descripcion.value,delete this.recarga.created_at,this.spinner.show(),this.recargasService.update(this.recarga,this.recarga.id).subscribe(e=>{var i;1===e&&(this.recarga.realizado?this.toastr.success("Recarga realizada"):this.toastr.error("Recarga rechazada"),this.afdb.object("recargas/"+this.recarga.key).remove().then(()=>this.recarga=null)),this.descripcion.reset(),null===(i=document.getElementById("closeModal"))||void 0===i||i.click(),this.spinner.hide()},()=>{var e;null===(e=document.getElementById("closeModal"))||void 0===e||e.click(),this.spinner.hide()})):this.toastr.error("Ingrese la referencia")}cancelar(e){this.afdb.object("recargas/"+e.key+"/aprobado_por").remove(),this.afdb.object("recargas/"+e.key+"/aprobado").remove()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f),t.Y36(h.KQ),t.Y36(g.F0),t.Y36(Z._W),t.Y36(T.t2),t.Y36(C.e),t.Y36(x.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-recarga"]],decls:11,vars:3,consts:[[1,"row"],[1,"col-12"],["type","button","routerLink","/app/recargas-admin",1,"btn","btn-round","btn-defaul"],["class","col-sm-6 col-xl-4 col-xxl-3",4,"ngFor","ngForOf"],["id","realizar","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","form",1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content",2,"background-color","#1a2035"],["class","modal-body",4,"ngIf"],["type","button","id","closeModal","hidden","","data-dismiss","modal"],[1,"col-sm-6","col-xl-4","col-xxl-3"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-category"],[1,"btn","btn-just-icon","btn-info","btn-sm",3,"click"],[1,"fa","fa-copy"],[1,"card-body"],[1,"form-group"],["src","../../assets/img/tarjeta.png","height","50px",4,"ngIf"],[1,"card-footer"],["data-toggle","modal","data-target","#realizar",1,"btn","btn-success","m-1",3,"click"],["data-toggle","modal","data-target","#realizar",1,"btn","btn-info","m-1",3,"click"],[1,"btn","btn-default","m-1",3,"click"],["src","../../assets/img/tarjeta.png","height","50px"],[1,"modal-body"],[1,"form-group","m-2"],["type","text","placeholder","Referencia",1,"form-control",3,"formControl"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[1,"form-control",2,"background-color","#1a2035",3,"formControl"],["value","ID de jugador incorrecto"],["value","ID de otra region"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3," Atras "),t.qZA(),t.qZA(),t.YNc(4,O,28,9,"div",3),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.YNc(8,Y,8,1,"div",7),t.YNc(9,F,15,1,"div",7),t._UZ(10,"button",8),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngForOf",i.recargas),t.xp6(4),t.Q6J("ngIf",null==i.recarga?null:i.recarga.realizado),t.xp6(1),t.Q6J("ngIf",!(null!=i.recarga&&i.recarga.realizado)))},directives:[g.rH,l.sg,l.O5,s.Fj,s.JJ,s.oH,s.EJ,s.YN,s.Kr],pipes:[l.uU],styles:[""]}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(N)],g.Bz]}),o})(),D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,w,T.ef,s.u5,s.UX]]}),o})()}}]);